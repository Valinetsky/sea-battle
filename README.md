# Программа МОРСКОЙ БОЙ
Прямая цитата из Википедии: «„Морской бой“ — игра для двух участников, в которой игроки по очереди называют координаты на неизвестной им карте соперника. Если у соперника по этим координатам имеется корабль (координаты заняты), то корабль или его часть „топится“, а попавший получает право сделать ещё один ход. Цель игрока — первым потопить все корабли противника.»
## Правила
Игровое поле — квадрат, со стороной десять клеток. У каждого из игроков десять кораблей: один четырехпалубный (занимает четыре клетки на карте по вертикали или горизонтали), два трехпалубных, три двухпалубных, четыре однопалубных. Корабли размещаются на игровом поле так, чтобы они не соприкасались друг с другом сторонами или углами. Далее, как в вышеприведенной цитате, — бой до победы одного из игроков.
## Работа проекта
Код в репозитории реализует два этапа игры «Морской бой»:
- случайное размещение кораблей на поле игрока и компьютера;
- основной цикл игры с расчетом попаданий по караблям опонента.

Программа на первом этапе предлагает возможность генерации новой расстановки кораблей на поле игрока. На втором этапе различаются два способа расчета координат выстрела. Для игрока это просто случайно выбранная непрострелянная клетка, с учетом предыдущих выстрелов, потопленных кораблей и ограничений, описанных в правилах «…чтобы они не соприкасались друг с другом сторонами или углами…». Для компьютера, кроме указанных для игрока ограничений в выборе клетки для выстрела, используется сито поиска самого большого непотопленного корабля.

Пример сита для поиска четырехпалубного корабля:
```
     1 2 3 4 5 6 7 8 9 10
     --------------------
1  | 0 1 0 0 0 1 0 0 0 1
2  | 0 0 1 0 0 0 1 0 0 0
3  | 0 0 0 1 0 0 0 1 0 0          
4  | 1 0 0 0 1 0 0 0 1 0
5  | 0 1 0 0 0 1 0 0 0 1          
6  | 0 0 1 0 0 0 1 0 0 0
7  | 0 0 0 1 0 0 0 1 0 0
8  | 1 0 0 0 1 0 0 0 1 0
9  | 0 1 0 0 0 1 0 0 0 1
10 | 0 0 1 0 0 0 1 0 0 0

1 — клетка, которую имеет смысл проверять.
```

Размер сита равен количеству клеток атакуемого (самого большого непотопленного) корабля за вычетом единицы. Начальная позиция сита при создании случайным образом сдвигается на такое же число клеток.

Таким образом, для поиска четырехпалубного корабля, в худшем случае потребуется 26 ходов. Для случайной выборки, в худшем случае, — 97.

По окончании работы программы выводится статус победителя и общее количество ходов партии.

Программа работает в режиме *autoplay*: после старта второго этапа (основного игрового цикла) идет расчет всех ходов игрока и компьютера, вплоть до полного уничтожения флота противника. 

Для отключения режима *autoplay* и останова программы между генерацией выстрелов раскомментируйте в коде строку ```Console.ReadLine();```.

```
// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Останов между выстрелами !!!!!!!!!!!!!!!!!!!!!
// !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
// Console.ReadLine();
```

## Возможные улучшения
- Вычищение кода от неиспользуемых функций и переменных.
- Оптимизация функций.
- Реализация режима взаимодействия программы с игроком-человеком.
- Реализация режима **Hardcore**:
```
     1 2 3 4 5 6 7 8 9 10   
   M M M M M M M M M M M M 
1  M                     M 
2  M                     M 
3  M     60 свободных    M 
4  M        клеток       M 
5  M  под однопалубники  M 
6  M                     M 
7  M ------------------- M  
8  M @ @ @   @ @ @   @ @ M 
9  M                     M 
10 M @ @ @ @   @ @   @ @ M 
   M M M M M M M M M M M M 
   
M — границы игрового поля компьютера.
@ — клетка, занятая кораблем.
```

После фиксированной расстановки первых шести кораблей, остается 60 свободных клеток для постановки четырех однопалубных. Таким образом поиск последнего однопалубника может занять до 60 ходов.

После генерации всех кораблей, случайным образом поворачиваем карту (возможны четыре направления), и случайным же образом отражаем ее по вертикали или горизонтали. 

- Режим **Impossible**: тоже, что и **Hardcore**, но без постановки последнего однопалубного корабля, пока на поле есть хотя бы одна непрострелянная клетка. Гарантирует 60 ходов до завершения игры. Крайне не рекомендуется для игры с игроком-человеком, во избежание физического уничтожения вычислительных комплексов. Режим можно использовать для тренировки нейронных сетей, созданных для программы «Морской бой».
